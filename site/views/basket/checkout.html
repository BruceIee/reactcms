{% extends '../layout/layout.html' %}

{% block style %}
{% parent %}
<link rel="stylesheet" href="/style/basket/checkout.css">
{% endblock %}

{% block script %}
{% parent %}
<script type="text/javascript" src="/library/stripe/stripe.v2.js"></script>
<script src="/script/basket/checkout.js"></script>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <h2 class="col-md-12">
            Checkout
        </h2>
    </div>
    <div class="row" style="margin-top:20px;margin-bottom:20px;">
        <div class="col-md-9">
            <!--
            <div>
                <h4>User</h4>
                {{ page.basket.user_id }}
            </div>
            -->
            <div style="margin-top:20px;">
                <h4>Shopping cart items</h4>
                <table class="table table-bordered" style="margin-top:20px;">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Price</th>
                            <th>Quantity</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in page.basket.items %}
                        <tr>
                            <td>{{ item.title }}</td>
                            <td>${{ item.price }}</td>
                            <td>{{ item.quantity }}</td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td colspan=2 style="font-weight:bold;">Total</td>
                            <td class="basket-total">${{ page.basket.total }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row" style="margin-top:0px;margin-bottom:20px;">
        <div class="col-md-5">
            <form method="POST" action="/baskets/purchase">
                <input type="hidden" name="basket" value="{{ page.basket._id + '' }}" />
                <h4>Payment Info</h4>
                <div class="payment-errors"></div>
                
                <table class="table borderless" style="margin-top:20px;">
                    <tbody>
                        <tr>
                            <td>Card Number</td>
                            <td colspan=3><input class="form-control" type="text" data-stripe="number" /></td>
                        </tr>
                        <tr>
                            <td>Name on Card</td>
                            <td colspan=3><input class="form-control" type="text" /></td>
                        </tr>
                        <tr>
                            <td>Expiration (MM/YYYY)</td>
                            <td><input class="form-control" type="text" data-stripe="exp-month" /></td>
                            <td style="width:10px;padding-top:10px;font-size:1.5em;">/</td>
                            <td><input class="form-control" type="text" data-stripe="exp-year" /></td>
                        </tr>
                        <tr>
                            <td>CVC</td>
                            <td colspan=3><input class="form-control" type="input" data-stripe="cvc" /></td>
                        </tr>
                    </tbody>
                </table>
                <button class="btn btn-success">Purchase</button>
                
            </form>
        </div>
    </div>
    
    <!--
    <div class="row" style="margin-top:0px;margin-bottom:30px;">
        <div class="col-md-5">
            <h4>Stripe Payment Test</h4>
            <form action="" method="POST">
                <script
                  src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                  data-key="pk_test_aWvjzUuXKPT0ya1gHdJuYKNI"
                  data-amount="2000"
                  data-name="Demo Site"
                  data-description="2 widgets ($20.00)"
                  data-image="/128x128.png"
                  data-locale="auto">
                </script>
            </form>
        </div>
    </div>
    -->
    
    <!--
    <div class="row" style="margin-top:0px;margin-bottom:30px;">
        <div class="col-md-5">
            <h4>Stripe Payment Test 2</h4>
            <form action="" method="POST" id="payment-form">
                <span class="payment-errors"></span>
              
                <div class="form-row">
                    <label>
                        <span>Card Number</span>
                        <input type="text" size="20" data-stripe="number"/>
                    </label>
                </div>
              
                <div class="form-row">
                    <label>
                        <span>CVC</span>
                        <input type="text" size="4" data-stripe="cvc"/>
                    </label>
                </div>
              
                <div class="form-row">
                    <label>
                        <span>Expiration (MM/YYYY)</span>
                        <input type="text" size="2" data-stripe="exp-month"/>
                    </label>
                    <span> / </span>
                    <input type="text" size="4" data-stripe="exp-year"/>
                </div>
              
                <button type="submit">Submit Payment</button>
            </form>
        </div>
    </div>
    -->
    
</div>
{% endblock %}
